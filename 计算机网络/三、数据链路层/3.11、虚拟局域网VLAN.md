### 1、概述
+ 虚拟局域网VLAN是一种将局域网内的设备划分成与物理位置无关的逻辑组技术，这些逻辑组具有某些共同的需求
### 2、实现机制
+ **IEEE 802.1Q帧** #IEEE802.1Q帧
	+ Dot One Q帧，对以太网的MAC帧进行了扩展，插入了4字节的VLAN标记
	+ ![**IEEE 802.1Q帧**](3.11(1).png)
	+ VLAN标记的最后12比特称为VLAN标识VID，它唯一的标志了以太网帧属于哪一个VLAN。有效范围：1~4094闭区间
	+ 802.1Q帧由交换机处理
		+ 交换机收到普通的以太网帧会插入4字节的VLAN转换为802.1Q帧，这一过程为”打标签“
		+ 当交换机转发802.1Q帧的时候，可能会产出VLAN标记，称为”去标签“；
+ **交换机的端口类型**
	+ 交换机端口一般有以下三种：Access、Trunk、Hybrid
	+ 交换机各缺省VLAN ID：
		+ ![缺省VLAN ID](3.11(2).png)
	1. **Access端口**
		+ Access端口一般连接的是用户计算机
		+ Access端口只能属于一个VLAN
		+ Access端口的PVID只能与所属的VLAN的id相同
		+ 示意：![Access](3.11(3).png)
		+ 工作流程：当主机A发送一个广播帧，首先端口1会接收该以太网帧，然后给它打上VLAN标记为2，即值VID=2，因为主机A属于VLAN2这个局域网，然后端口1会转发到其他接口PVID=2的端口，并去标签
	2. **Trunk端口**
		+ Trunk端口一般用于交换机或路由器之间的相互连接
		+ Trunk可以属于多个VLAN。用户可以设置PVID值默认为1
		+ 示意：![Access](3.11(4).png)
		+ 工作流程：当主机A发送广播帧后，端口1接收并打标签，然后转发到PVID=1的各端口，当Trunk端口接收到后，会去标签然后转发到交换机2，这样A广播帧进入到交换机2，然后接收广播帧后再为该广播帧打标签，并转发到PVID=VID的端口上
	2. **Hybrid端口**
		+ Hybrid端口既可以用于交换机和路由器之间的相连也可以用于用户计算机之间的相连
		+ Hybrid端口可以属于多个VLAN
		+ 处理方法：![Hybrid](3.11(5).png)
		+ 工作流程：![Hybrid](3.11(6).png)
		+ 与上面的端口类似，但一点不同的是，当PVID不匹配时候，会直接转发到各接口，于是各主机直接接收到802.1Q帧，但主机不能识别802.1Q帧，于是会丢弃该帧